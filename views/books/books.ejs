<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <!-- Connecting css files  -->
  <link rel="stylesheet" href="/vendor/normalize-4.1.1.css" type="text/css" />
  <link rel="stylesheet" href="/vendor/border-box.css" type="text/css" />
  <link rel="stylesheet" href="/styles/main.css" type="text/css" />
  <link rel="stylesheet" href="/styles/layout.css" type="text/css" />
  <link rel="stylesheet" href="/styles/footer.css" type="text/css" />
  <link rel="stylesheet" href="/styles/body.css" type="text/css" />


  <!-- <link rel="stylesheet" href="/styles/item_preview.css" type="text/css" /> -->
  <link rel="stylesheet" href="/styles/nav_bar.css" type="text/css" />
  <link rel="stylesheet" href="/styles/books.css" type="text/css" />

  <!-- Bootstrap CSS -->
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.2.1/css/bootstrap.min.css" integrity="sha384-GJzZqFGwb1QTTN6wy59ffF1BuGJpLSa9DkKMp0DgiMDm4iYMj70gZWKYbI706tWS" crossorigin="anonymous"/>
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Cinzel+Decorative&display=swap" rel="stylesheet"/>
  <link href="https://fonts.googleapis.com/css2?family=Cinzel&display=swap" rel="stylesheet"/>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" integrity="sha512-Fo3rlrZj/k7ujTnHg4CGR2D7kSs0v4LLanw2qksYuRlEzO+tcaEPQogQ0KaoGN26/zrn20ImR1DfuLWnOo7aBA==" crossorigin="anonymous" referrerpolicy="no-referrer" />

  <!-- Connecting Javascript files  -->
  <script type="text/javascript" src="/vendor/jquery-3.0.0.js"></script>
  <script type="text/javascript" src="/scripts/index.js"></script>

  <title>Books Listing</title>
  </head>
    <body>
      <%- include("../partials/_navbar") %>

      <% if (!items) { %>
        <div class="container" id="failed-search-container">
          <h3>Your search yielded no results. Try making another one.</h3>
          <form action="/books" method="GET" id="advanced-search-form" class="advanced-search-container">
            <div class="advanced-search-form">
              <label for="title">Title <i class="fa-solid fa-key"></i></label>
              <input class="input-box" type="text" name="title">
            </div>
            <div class="advanced-search-form">
              <label for="isbn">ISBN</label>
              <input class="input-box" type="disabled" maxlength="13" pattern="[0-9]" placeholder="cant type here" name="isbn" oninvalid="alert('numbers only')" readonly>
            </div>
            <div class="advanced-search-form">
              <label for="genre">Genre <i class="fa-solid fa-masks-theater"></i></label>
              <input class="input-box" type="text" name="genre">
            </div>
            <div class="advanced-search-form">
              <label for="min-price">Minimum price <i class="fa-solid fa-dollar-sign"></i></label>
              <input type="number" name="min-price" class="input-box">
            </div>
            <div class="advanced-search-form">
              <label for="max-price">Maximum price <i class="fa-solid fa-dollar-sign"></i><i class="fa-solid fa-dollar-sign"></i></label>
              <input class="input-box" type="number" name="max-price">
            </div>
            <div class="advanced-search-button">
              <button class="btn btn-outline-secondary" type="submit">Search</button>
            </div>
          </form>
        </div>
      <% } else { %>
        <% for(const item of items) { %>
        <div class="container" onclick="window.location='/books/item/<%=item.id%>';">
          <div class="bookmark">
           <h3><%= item.genre %></h3>
          </div>
          <img class="cover-image" src="<%= item.photo_url %>" alt="" />
            <div class="desc-box">
              <h1 class="book-title"><%= item.title %></h1>
              <a class="description"><%= item.description %></a>
              <br />
                <div class="price-tag-box">
                <p class="card-price">$<%= item.price %></p>
                </div>
              <br />
            </div>
        </div>
        <% } %>
      <% } %>
      <footer><%- include("../partials/_footer") %></footer>
    <!-- Bootstrap plugin JS -->
  <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.6/umd/popper.min.js" integrity="sha384-wHAiFfRlMFy6i5SRaxvfOCifBUQy1xHdJ/yoi7FRNXMRBu5WHdZYu1hA6ZOblgut" crossorigin="anonymous"></script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.2.1/js/bootstrap.min.js" integrity="sha384-B0UglyR+jN6CkvvICOB2joaf5I4l3gm9GU6Hc1og6Ls7i6U/mkkaduKaBhlAXv9k" crossorigin="anonymous"></script>
    </body>
</html>
